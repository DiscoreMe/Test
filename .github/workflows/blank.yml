name: Go
on: 
  pull_request:
    branches:
      - master
jobs:
  build:
    services:
        mongo:4.1:
          env:
            MONGO_INITDB_ROOT_USERNAME: tester
            MONGO_INITDB_ROOT_PASSWORD: dfjgre
  
    name: Tests and deploy
    runs-on: ubuntu-latest
    steps:

    - name: Set up Go 1.13
      uses: actions/setup-go@v1
      with:
        go-version: 1.13
      id: go

    - name: Check out code into the Go module directory
      uses: actions/checkout@master
    
#     - name: Install MongoDB
#       run: |
#         wget -qO - https://www.mongodb.org/static/pgp/server-3.6.asc | sudo apt-key add -
#         echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.6 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.6.list
#         sudo apt-get update
#         sudo apt-get install -y mongodb-org
#         sudo apt-get install -y mongodb-org=3.6.14 mongodb-org-server=3.6.14 mongodb-org-shell=3.6.14 mongodb-org-mongos=3.6.14 mongodb-org-tools=3.6.14
#     - name: Start MongoDB
#       run: sudo systemctl start mongod
      
    - name: Go tests
      run: go test -v
    
    
    
